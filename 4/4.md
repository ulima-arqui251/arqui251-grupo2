# 4. Decisiones Iniciales de Arquitectura

Sample content for section 4.

# 4. Decisiones Iniciales de Arquitectura
- [Volver al inicio](/README.md)

Este apartado presenta un consolidado de las principales decisiones que han guiado la definición de la arquitectura del sistema **Study-Mate**, abordando desde la estructura general hasta la elección de tecnologías clave para el desarrollo, coordinación, persistencia y despliegue del sistema.

A continuación, se muestra una tabla de resumen que sintetiza las decisiones más relevantes tomadas a nivel general, incluyendo criterios de elección y alternativas consideradas.

## Generalidades
| Tipo de decisión                | Título                                                              | Alternativas                                                                                                   | Decisión                                                           |
|--------------------------------|----------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
| Asignación de Responsabilidades | Elección entre arquitectura monolítica y de microservicios         | 1. Microservicios independientes, 2. Arquitectura monolítica modular por capas                                | 2. Arquitectura monolítica modular por capas                       |
| Modelo de Coordinación          | Comunicación entre frontend y backend                               | 1. API REST (HTTP/JSON), 2. WebSockets                                                                       | 1. API REST                                                        |
| Modelo de Coordinación          | Coordinación interna entre módulos funcionales                      | 1. Eventos asincrónicos (observer), 2. Llamadas directas entre servicios                                      | 1. Eventos asincrónicos                                            |
| Modelo de Datos                 | Modelo de persistencia principal del sistema                        | 1. Relacional (MySQL), 2. Documental (NoSQL)                                                                 | 1. Modelo relacional (MySQL)                                       |
| Mapeo entre elementos de arquitectura | Asignación de responsabilidades a componentes físicos/lógicos        | 1. Estructura por capas y dominios funcionales, 2. Organización plana sin separación clara                    | 1. Estructura por capas y dominios funcionales                     |
| Elección de Tecnología          | Stack de desarrollo base                                            | 1. React + Node.js + MySQL, 2. Angular + Java + PostgreSQL                                                   | 1. React + Node.js + MySQL                                         |
| Elección de Tecnología          | Autenticación y sesiones                                            | 1. Manejo de sesiones en servidor, 2. JWT con autenticación sin estado                                       | 2. JWT sin estado                                                  |
| Elección de Tecnología          | ORM para modelado y acceso a la base de datos                       | 1. Sequelize, 2. Prisma, 3. Consultas SQL manual                                                              | 1. Sequelize                                                       |
| Elección de Tecnología          | Librería de estilos para UI                                         | 1. Bootstrap 5, 2. Tailwind CSS, 3. CSS personalizado                                                         | 1. Bootstrap 5                                                     |
| Elección de Tecnología          | Herramientas de despliegue                                          | 1. Vercel (frontend) + Render (backend), 2. VPS único, 3. Firebase Hosting + Cloud Functions                  | 1. Vercel + Render                                                 |


## Módulo 01 — Autenticación y Seguridad:
| Tipo de decisión                 | Título                                                                 | Alternativas                                                                                             | Decisión                                                    |
|----------------------------------|------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Asignación de Responsabilidades  | Separación de control entre login, registro y gestión de sesiones     | 1. Controlador único para todo, 2. Separación por responsabilidades                                     | 2. Separación por responsabilidades                         |
| Modelo de Coordinación           | Coordinación entre frontend y backend para login y validación de roles| 1. Middleware con JWT, 2. Sesiones de servidor                      | 1. Middleware con JWT                                       |
| Modelo de Datos                  | Estructura del modelo de usuarios y autenticación                      | 1. Modelo relacional (usuarios + claims), 2. Tokens incrustados en datos                                | 1. Modelo relacional (usuarios + claims)                   |
| Mapeo entre elementos de arquitectura | Mapeo de middlewares, controladores y servicios en backend              | 1. Rutas protegidas con control por rol, 2. Validación en el frontend                                   | 1. Rutas protegidas con control por rol                    |
| Elección de Tecnología           | Librerías y herramientas para autenticación segura                     | 1. JWT + bcryptjs, 2. Sessions tradicionales                                                             | 1. JWT + bcryptjs                                           |

## Módulo 02 — Lecciones y Retos:
| Tipo de decisión                 | Título                                                                 | Alternativas                                                                                             | Decisión                                                    |
|----------------------------------|------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Asignación de Responsabilidades  | Separación de lógica de visualización, evaluación y progreso           | 1. Backend centraliza validación y estado, 2. Frontend maneja el progreso local                         | 1. Backend centraliza validación y estado                  |
| Modelo de Coordinación           | Flujo de navegación entre unidades y control de progreso               | 1. Coordinación vía rutas REST, 2. WebSockets para navegación reactiva                                  | 1. Coordinación vía rutas REST                             |
| Modelo de Datos                  | Representación de avance, respuestas y estructura de lecciones         | 1. Modelo relacional normalizado, 2. JSON embebido por usuario                                           | 1. Modelo relacional normalizado                           |
| Mapeo entre elementos de arquitectura | Mapeo de servicios de contenido, evaluación y progreso                  | 1. Separación por dominio con controladores específicos, 2. Lógica unificada                            | 1. Separación por dominio con controladores específicos    |
| Elección de Tecnología           | Frameworks y herramientas para mostrar, responder y registrar avance   | 1. React + Axios + Sequelize, 2. Vue + Supabase                                                         | 1. React + Axios + Sequelize                               |

## Módulo 03 — Gamificación:
| Tipo de decisión                 | Título                                                                 | Alternativas                                                                                             | Decisión                                                    |
|----------------------------------|------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Asignación de Responsabilidades  | Gestión independiente de eventos y recompensas                         | 1. Lógica embebida en cada módulo, 2. Módulo autónomo de gamificación                                   | 2. Módulo autónomo de gamificación                         |
| Modelo de Coordinación           | Disparo de recompensas desde otros módulos                             | 1. Eventos internos con observer, 2. API con llamadas directas                                           | 1. Eventos internos con observer                           |
| Modelo de Datos                  | Estructura de logros, eventos y puntos acumulados                      | 1. Tablas independientes por tipo de recompensa, 2. Única tabla con campos tipo y valor                  | 1. Tablas independientes por tipo                          |
| Mapeo entre elementos de arquitectura | Subsistema de escucha de eventos y asignación de recompensas            | 1. Subscripciones internas en backend, 2. Integración directa desde lecciones y comunidad               | 1. Subscripciones internas en backend                      |
| Elección de Tecnología           | Herramientas y estructuras para eventos y recompensas                  | 1. Node.js EventEmitter + Sequelize, 2. Redis Streams + MongoDB                                         | 1. Node.js EventEmitter + Sequelize                        |

## Módulo 04 — Comunidad:
| Tipo de decisión                 | Título                                                                 | Alternativas                                                                                             | Decisión                                                    |
|----------------------------------|------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Asignación de Responsabilidades  | Separación entre publicación, comentario y moderación                 | 1. Controlador único para todo el contenido, 2. Lógica dividida por tipo de acción                      | 2. Lógica dividida por tipo de acción                       |
| Modelo de Coordinación           | Coordinación entre usuarios y flujo de interacción                    | 1. API REST con rutas jerárquicas, 2. WebSockets para comentarios en tiempo real                        | 1. API REST con rutas jerárquicas                          |
| Modelo de Datos                  | Modelo jerárquico de publicaciones y comentarios                      | 1. Relación padre-hijo entre comentarios, 2. JSON embebido con lista de respuestas                      | 1. Relación padre-hijo entre comentarios                   |
| Mapeo entre elementos de arquitectura | Separación de servicios de publicación y moderación                    | 1. Servicios desacoplados por dominio (`posts`, `comments`), 2. Lógica embebida                         | 1. Servicios desacoplados por dominio                      |
| Elección de Tecnología           | Frameworks y herramientas para interacción social                     | 1. React + Axios + Sequelize, 2. Vue + Firebase                                                          | 1. React + Axios + Sequelize                               |

## Módulo 05 — Plan Premium:
| Tipo de decisión                 | Título                                                                 | Alternativas                                                                                             | Decisión                                                    |
|----------------------------------|------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Asignación de Responsabilidades  | Control de acceso a contenido exclusivo                               | 1. Validación por frontend, 2. Middleware en backend + control visual en frontend                        | 2. Middleware en backend + control visual en frontend       |
| Modelo de Coordinación           | Validación de estado premium                                          | 1. Validación mediante middleware, 2. Validación por consulta en cada llamada                            | 1. Validación mediante middleware                          |
| Modelo de Datos                  | Estructura de planes y suscripciones                                 | 1. Tabla de suscripciones vinculada al usuario, 2. Campo `isPremium` booleano en tabla `usuarios`       | 1. Tabla de suscripciones vinculada al usuario             |
| Mapeo entre elementos de arquitectura | Separación de lógica de validación en middleware y rutas protegidas    | 1. Middleware reutilizable, 2. Validación embebida en controladores                                     | 1. Middleware reutilizable                                 |
| Elección de Tecnología           | Tecnologías para control de planes                                   | 1. JWT extendido + Sequelize, 2. Stripe embebido desde el inicio                                         | 1. JWT extendido + Sequelize                               |

## Módulo 06 — Docente:
| Tipo de decisión                 | Título                                                                 | Alternativas                                                                                             | Decisión                                                    |
|----------------------------------|------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Asignación de Responsabilidades  | Separación de vistas y control por rol docente                        | 1. Panel único con filtros, 2. Panel exclusivo para docentes con rutas propias                          | 2. Panel exclusivo para docentes con rutas propias          |
| Modelo de Coordinación           | Coordinación entre docentes, lecciones y estudiantes                  | 1. Endpoints por entidad, 2. Módulo acoplado dentro de `/admin`                                         | 1. Endpoints por entidad                                   |
| Modelo de Datos                  | Asociación entre docentes, lecciones y progreso                       | 1. Tablas relacionales con claves foráneas, 2. JSON embebido en usuarios                                | 1. Tablas relacionales con claves foráneas                 |
| Mapeo entre elementos de arquitectura | Separación de rutas por rol docente y servicios académicos             | 1. Prefijos exclusivos `/docente`, 2. Lógica compartida con validación en controlador                   | 1. Prefijos exclusivos `/docente`                          |
| Elección de Tecnología           | Tecnologías para seguimiento académico                                | 1. React + Express + Sequelize, 2. Angular + NestJS + TypeORM                                           | 1. React + Express + Sequelize                             |

## Módulo 07 — Institucional:
| Tipo de decisión                 | Título                                                                 | Alternativas                                                                                             | Decisión                                                    |
|----------------------------------|------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Asignación de Responsabilidades  | Gestión jerárquica de instituciones, sedes y usuarios                  | 1. Control centralizado con estructura relacional, 2. Campos sueltos en usuarios                        | 1. Control centralizado con estructura relacional           |
| Modelo de Coordinación           | Coordinación entre admins de sede, institución y sistema               | 1. Endpoints con filtros por contexto, 2. APIs genéricas para todos los niveles                         | 1. Endpoints con filtros por contexto                       |
| Modelo de Datos                  | Modelo relacional jerárquico                                           | 1. Tablas separadas para institución, sede y usuarios, 2. Estructura plana con atributos manuales       | 1. Tablas separadas para institución, sede y usuarios       |
| Mapeo entre elementos de arquitectura | Separación de servicios administrativos por jerarquía                  | 1. Controladores y servicios diferenciados, 2. Servicios comunes con condicionales                      | 1. Controladores y servicios diferenciados                  |
| Elección de Tecnología           | Stack para segmentación por sede e institución                        | 1. React + Sequelize + filtros en backend, 2. Firebase con roles integrados                             | 1. React + Sequelize + filtros en backend                   |

## Módulo 08 — Administrador de Contenido:
| Tipo de decisión                 | Título                                                                 | Alternativas                                                                                             | Decisión                                                    |
|----------------------------------|------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Asignación de Responsabilidades  | Gestión de propuestas y flujo editorial                               | 1. Lógica distribuida en controladores de contenido, 2. Control centralizado en módulo de revisión       | 2. Control centralizado en módulo de revisión               |
| Modelo de Coordinación           | Flujo de revisión de contenido y cambios de estado                    | 1. Backend con estados (`pendiente`, `aprobado`, `rechazado`), 2. Control total desde frontend           | 1. Backend con control de estado editorial                 |
| Modelo de Datos                  | Estructura de propuestas y contenidos aprobados                       | 1. Tablas separadas (`propuestas`, `contenidos`), 2. Una sola tabla con campo de estado                  | 1. Tablas separadas (`propuestas`, `contenidos`)           |
| Mapeo entre elementos de arquitectura | Separación entre lógica de revisión y lógica de publicación            | 1. Servicios diferenciados por etapa del ciclo editorial, 2. Servicio único con validación condicional   | 1. Servicios diferenciados por etapa del ciclo editorial   |
| Elección de Tecnología           | Herramientas para revisión, control de estado y moderación            | 1. React + Express + Sequelize, 2. CMS externo (ej. Strapi, Directus)                                   | 1. React + Express + Sequelize                             |
